#path_datos <- "C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/"
path_datos <- "C:/Users/Denise Laroze/Dropbox/Sitios web/Datos Estudio Online/"
# If you don´t use Rprojects functionality setwd
#setwd("C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/")
#path_github <- "C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/Pilots/Superintendencia_de_Pensiones"
path_github <- "C:/Users/Denise Laroze/Documents/GitHub/Pensions Website Design/"
df <- readRDS(paste0(path_datos, "online_data.rds"))
source(paste0(path_github,"Pilots/Superintendencia_de_Pensiones/R/paquetes.R"))
source(paste0(path_github,"Pilots/Superintendencia_de_Pensiones/R/funciones.R"))
source(paste0(path_github,"Online/R/etl_surveys.R"))
source(paste0(path_github,"Online/R/etl_sites.R"))
source(paste0(path_github,"Online/R/etl_complete.R"))
source(paste0(path_github,"Online/R/etl_sites.R"))
source(paste0(path_github,"Online/R/etl_complete.R"))
View(pilot_data)
table(pilot_data$OptOut)
pilot_data <- sitios_complete %>%
right_join(encuestas, by = "useridn") %>%
filter(useridn >99) %>%
mutate(Age = 2022 - as.numeric(Birth),
Treatments = factor(case_when(
website.x == "1" ~ "Perfil",
website.x == "2" ~ "Video",
website.x ==  "3" ~ "VideoPerfil",
website.x == "4" ~ "Perfil",
website.x == "5" ~ "Video",
website.x == "6" ~ "VideoPerfil",
website.x == "7" ~ "Baseline",
website.x == "8" ~ "Baseline"), levels = c("Baseline", "Perfil", "Video", "VideoPerfil")),
OptOut = case_when(
terminaron == "si" & contesta == "B" ~ "In",
TRUE ~ "Out"
),
Pension_Type = factor(case_when(
website.x == "1" ~ "Public",
website.x == "2" ~ "Public",
website.x == "3" ~ "Public",
website.x == "8" ~ "Public",
website.x == "4" ~ "Private",
website.x == "5" ~ "Private",
website.x == "6" ~ "Private",
website.x == "7" ~ "Private"), levels = c("Public", "Private"))) %>%
#online = ifelse(fecha.x.x == "2022-06-08", 1, 0))
arrange(useridn)
pilot_data <- sitios_complete %>%
right_join(encuestas, by = "useridn") %>%
filter(useridn >99) %>%
mutate(Age = 2022 - as.numeric(Birth),
Treatments = factor(case_when(
website.x == "1" ~ "Perfil",
website.x == "2" ~ "Video",
website.x ==  "3" ~ "VideoPerfil",
website.x == "4" ~ "Perfil",
website.x == "5" ~ "Video",
website.x == "6" ~ "VideoPerfil",
website.x == "7" ~ "Baseline",
website.x == "8" ~ "Baseline"), levels = c("Baseline", "Perfil", "Video", "VideoPerfil")),
OptOut = case_when(
terminaron == "si" & contesta == "B" ~ "In",
TRUE ~ "Out"
),
OptOut2 = case_when(
terminaron == "si" & contesta != "C" ~ "In",
TRUE ~ "Out"
),
Pension_Type = factor(case_when(
website.x == "1" ~ "Public",
website.x == "2" ~ "Public",
website.x == "3" ~ "Public",
website.x == "8" ~ "Public",
website.x == "4" ~ "Private",
website.x == "5" ~ "Private",
website.x == "6" ~ "Private",
website.x == "7" ~ "Private"), levels = c("Public", "Private"))) %>%
#online = ifelse(fecha.x.x == "2022-06-08", 1, 0))
arrange(useridn)
view(pilot_data[, c("terminaron", "contesta","OptOut", "OptOut2")])
View(pilot_data[, c("terminaron", "contesta","OptOut", "OptOut2")])
#path_datos <- "C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/"
path_datos <- "C:/Users/Denise Laroze/Dropbox/Sitios web/Datos Estudio Online/"
# If you don´t use Rprojects functionality setwd
#setwd("C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/")
#path_github <- "C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/Pilots/Superintendencia_de_Pensiones"
path_github <- "C:/Users/Denise Laroze/Documents/GitHub/Pensions Website Design/"
#sitios_sm <- readRDS(paste0(path_datos, "sitios_complete.rds"))
source(paste0(path_github,"Pilots/Superintendencia_de_Pensiones/R/paquetes.R"))
source(paste0(path_github,"Pilots/Superintendencia_de_Pensiones/R/funciones.R"))
source(paste0(path_github,"Online/R/etl_surveys.R"))
source(paste0(path_github,"Online/R/etl_sites.R"))
source(paste0(path_github,"Online/R/etl_complete.R"))
df <- readRDS(paste0(path_datos, "online_data.rds"))
#path_datos <- "C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/"
path_datos <- "C:/Users/Denise Laroze/Dropbox/Sitios web/Datos Estudio Online/"
# If you don´t use Rprojects functionality setwd
#setwd("C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/")
#path_github <- "C:/Users/Usuario/Documents/INVESTIGACION/MiInvestigacion/Pensions-Website-Design/Pilots/Superintendencia_de_Pensiones"
path_github <- "C:/Users/Denise Laroze/Documents/GitHub/Pensions Website Design/"
df <- readRDS(paste0(path_datos, "online_data.rds"))
table(df$OptOut)
opt_out<- glm(as.factor(OptOut) ~ Treatments, data = df, family = "binomial")
opt_out.pp<- glm(as.factor(OptOut) ~ Treatments, data = df[df$Pension_Type=="Public",], family = "binomial")
opt_out.pv<- glm(as.factor(OptOut) ~ Treatments, data =df[df$Pension_Type=="Private",], family = "binomial")
################################
#### Ideas to test - not clean
#### author: Denise Laroze
################################
library(stargazer)
stargazer(opt_out, opt_out.pp, opt_out.pv)
df %>%
group_by(Treatments) %>%
dplyr::summarize(Mean = mean(correct_response, na.rm=TRUE),
sd = sd(correct_response, na.rm=TRUE))
df %>%
group_by(Treatments, Pension_Type) %>%
dplyr::summarize(Mean = mean(correct_response, na.rm=TRUE),
sd = sd(correct_response, na.rm=TRUE))
#### Changes in preferences regarding pensions
df.pv<-df[df$Pension_Type=="Private",]
df.pp<-df[df$Pension_Type=="Public",]
table(df.pv$PlanJubi, df.pv$MB_Despues) ### Not clear how to interpret this
df.ns<-df[df$PlanJubi=="No sabe",]
View(df.ns)
lm_CR_ns <- lm(correct_response ~ Treatments,
data = df.ns)
summary(lm_CR_ns)
require(nnet)
multinom_model <- multinom(Treatments ~ Age + Gender + Educ., data = df)
multinom_model <- multinom(Treatments ~ Age + Gender + Educ, data = df)
summary(multinom_model)
stargazer::(multinom_model)
stargazer(multinom_model)
multinom_model <- multinom(Treatments ~ Age + Gender + Educ + financial_lit, data = df)
stargazer(multinom_model)
### Correct Response
lm_CR <- lm(correct_response ~ Treatments,
data = df)
lm_CR_pv <- lm(correct_response ~ Treatments,
data = df[df$Pension_Type=="Public",])
lm_CR_pp <- lm(correct_response ~ Treatments,
data = df[df$Pension_Type=="Private",])
lm_CR_F <- lm(correct_response ~ Treatments,
data = df[df$Gender=="F",])
lm_CR_M <- lm(correct_response ~ Treatments,
data = df[df$Gender=="M",])
lm_CR_ns <- lm(correct_response ~ Treatments,
data = df.ns)
stargazer(lm_CR, lm_CR_pv, lm_CR_pp, lm_CR_F, lm_CR_M, lm_CR_ns)
df$facil<-parse_number(df$Facilidad)
lm_facil <- lm(facil ~ Treatments,
data = df[df$Pension_Type=="Public",])
summary(lm_facil)
table(df$Facilidad)
opt_out<- glm(as.factor(OptOut) ~ Treatments, data = df, family = "binomial")
opt_out.pp<- glm(as.factor(OptOut) ~ Treatments, data = df[df$Pension_Type=="Public",], family = "binomial")
opt_out.pv<- glm(as.factor(OptOut) ~ Treatments, data =df[df$Pension_Type=="Private",], family = "binomial")
stargazer(opt_out, opt_out.pp, opt_out.pv)
### Correct Response
lm_CR <- lm(correct_response ~ Treatments,
data = df)
lm_CR_pv <- lm(correct_response ~ Treatments,
data = df[df$Pension_Type=="Public",])
lm_CR_pp <- lm(correct_response ~ Treatments,
data = df[df$Pension_Type=="Private",])
lm_CR_F <- lm(correct_response ~ Treatments,
data = df[df$Gender=="F",])
lm_CR_M <- lm(correct_response ~ Treatments,
data = df[df$Gender=="M",])
lm_CR_ns <- lm(correct_response ~ Treatments,
data = df.ns)
stargazer(lm_CR, lm_CR_pv, lm_CR_pp, lm_CR_F, lm_CR_M, lm_CR_ns)
multinom_model <- multinom(Treatments ~ Age + Gender + Educ + financial_lit + present_bias, data = df)
stargazer(multinom_model)
multinom_model <- multinom(Treatments ~ Age + Gender + Educ + financial_lit, data = df)
stargazer(multinom_model)
require(nnet)
multinom_model1 <- multinom(Treatments ~ Age + Gender + Educ, data = df)
multinom_model2 <- multinom(Treatments ~ Age + Gender + Educ + financial_lit, data = df)
multinom_model3 <- multinom(Treatments ~ present_bias + financial_lit, data = df)
stargazer(multinom_model1, multinom_model2, multinom_model3 )
table(df$present_bias, df$Pension_Type)
table(df$present_bias, df$Treatments)
df$pb_d<-ifelse(df$present_bias>19999, "alto", "bajo")
require(nnet)
multinom_model1 <- multinom(Treatments ~ Age + Gender + Educ, data = df)
multinom_model2 <- multinom(Treatments ~ Age + Gender + Educ + financial_lit, data = df)
multinom_model3 <- multinom(Treatments ~ pb_d + financial_lit, data = df)
stargazer(multinom_model1, multinom_model2, multinom_model3 )
multinom_model1 <- multinom(Treatments ~ Age + Gender + Educ, data = df)
multinom_model2 <- multinom(Treatments ~ Age + Gender + Educ + pb_d + as.factor(financial_lit), data = df)
stargazer(multinom_model1, multinom_model2)
lm_CR <- lm(correct_response ~ Treatments+ Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df)
lm_CR_pv <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Public",])
lm_CR_pp <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Private",])
lm_CR_F <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Gender=="F",])
lm_CR <- lm(correct_response ~ Treatments+ Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df)
lm_CR_pv <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Public",])
lm_CR_pp <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Private",])
lm_CR_F <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Gender=="F",])
lm_CR <- lm(correct_response ~ Treatments+ Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df)
lm_CR_pv <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Public",])
lm_CR_pp <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Private",])
lm_CR_F <- lm(correct_response ~ Treatments + Age  + Educ + pb_d + as.factor(financial_lit),
data = df[df$Gender=="F",])
lm_CR_M <- lm(correct_response ~ Treatments + Age + Educ + pb_d + as.factor(financial_lit),
data = df[df$Gender=="M",])
lm_CR_ns <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d ,
data = df.ns)
df$pb_d<-ifelse(df$present_bias>19999, "alto", "bajo")
df.pv<-df[df$Pension_Type=="Private",]
df.pp<-df[df$Pension_Type=="Public",]
df.ns<-df[df$PlanJubi=="No sabe",]
lm_CR <- lm(correct_response ~ Treatments+ Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df)
lm_CR_pv <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Public",])
lm_CR_pp <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d + as.factor(financial_lit),
data = df[df$Pension_Type=="Private",])
lm_CR_F <- lm(correct_response ~ Treatments + Age  + Educ + pb_d + as.factor(financial_lit),
data = df[df$Gender=="F",])
lm_CR_M <- lm(correct_response ~ Treatments + Age + Educ + pb_d + as.factor(financial_lit),
data = df[df$Gender=="M",])
lm_CR_ns <- lm(correct_response ~ Treatments + Age + Gender + Educ + pb_d ,
data = df.ns)
stargazer(lm_CR, lm_CR_pv, lm_CR_pp, lm_CR_F, lm_CR_M, lm_CR_ns)
df$facil<-parse_number(df$Facilidad)
lm_facil <- lm(facil ~ Treatments,
data = df[df$Pension_Type=="Public",])
stargazer(lm_facil)
table(df$Facilidad, df$Pension_Type)
df$InfoUtil_1<-as.numeric(df$InfoUtil_1)
lm_util.pp <- lm(InfoUtil_1 ~ Treatments,
data = df[df$Pension_Type=="Public",])
lm_util.pv <- lm(InfoUtil_1 ~ Treatments,
data = df[df$Pension_Type=="Private",])
stargazer(lm_util.pp, lm_util.pv)
lm_util <- lm(InfoUtil_1 ~ Treatments,
data = df)
lm_util.pp <- lm(InfoUtil_1 ~ Treatments,
data = df[df$Pension_Type=="Public",])
lm_util.pv <- lm(InfoUtil_1 ~ Treatments,
data = df[df$Pension_Type=="Private",])
stargazer(lm_util, lm_util.pp, lm_util.pv)
advisor<- glm(as.factor(Advisor) ~ Treatments, data = df, family = "binomial")
summary(advisor)
Chang_Adv <- glm(as.factor(Change_Advisor) ~ Treatments, data = df, family = "binomial")
summary(Chang_Adv)
stargazer(advisor)
df$Recomendar<-as.numeric(df$Recomendar)
lm_recomendar<- lm(Recomendar ~ Treatments,
data = df)
lm_recomendar.pv <- lm(Recomendar ~ Treatments,
data = df[df$Pension_Type=="Private",])
lm_recomendar.pp <- lm(Recomendar ~ Treatments,
data = df[df$Pension_Type=="Public",])
stargazer(lm_recomendar, lm_recomendar.pp, lm_recomendar.pv)
lm_overconf<-lm(overconfidence~ Treatments,
data = df)
lm_overconf.pp<-lm(overconfidence~ Treatments,
data = df[df$Pension_Type=="Public",])
lm_overconf.pv<-lm(overconfidence~ Treatments,
data = df[df$Pension_Type=="Private",])
stargazer(lm_overconf, lm_overconf.pp, lm_overconf.pv)

print(s1)
s2 <- df %>%
group_by( financial_lit_b, Treatments) %>%
summarise(
Fin_lit = length(unique(uemail)),
)
names(s2)<-names
s2<-s2[-c(13:16),]
print(s2)
s3 <- df %>%
group_by( educ_eng, Treatments) %>%
summarise(
Educ = length(unique(uemail)),
)
names(s3)<-names
s4 <- df %>%
group_by( private_health, Treatments) %>%
summarise(
health = length(unique(uemail)),
)
names(s4)<-names
tbl<-rbind(s1, s2, s3, s4)
tbl_wide <- tbl %>%
pivot_wider(names_from = Treatment, values_from = N)
s5 <- df %>%
group_by(Treatments) %>%
summarise(
Age_mean = round(mean(Age, na.rm = TRUE),2),
Age_sd = round(sd(Age, na.rm = TRUE),2),
)%>%
pivot_longer(cols = c(Age_mean, Age_sd), names_to = "Variable", values_to = "Value") %>%
pivot_wider(names_from = Treatments, values_from = Value)
print(s4)
tbl$Total<-rowSums(tbl[2:5])
View(s5)
tbl<-rbind(tbl_wide, s5)
tbl$Total<-rowSums(tbl[2:5])
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
View(tbl)
tbl<-rbind(s1, s2, s3, s4)
tbl_wide <- tbl %>%
pivot_wider(names_from = Treatment, values_from = N)
tbl_wide$Total<-rowSums(tbl_wide[2:5])
s5 <- df %>%
group_by(Treatments) %>%
summarise(
Age_mean = round(mean(Age, na.rm = TRUE),2),
Age_sd = round(sd(Age, na.rm = TRUE),2),
)%>%
pivot_longer(cols = c(Age_mean, Age_sd), names_to = "Variable", values_to = "Value") %>%
pivot_wider(names_from = Treatments, values_from = Value)
print(s4)
tbl<-rbind(tbl_wide, s5)
View(tbl)
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
summary(tbl)
print(tbl)
colnames(tbl) <- c("Baseline", "Profile", "Video", "Profile and Video")
# Change the row names
rownames(tbl) <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
print(tbl)
colnames(tbl) <- c("Baseline", "Profile", "Video", "Profile and Video", "Total", "\% Baseline", "\% Profile", "\% Video", "\% Profile and Video",)
colnames(tbl) <- c("Baseline", "Profile", "Video", "Profile and Video", "Total", "% Baseline", "% Profile", "% Video", "% Profile and Video",)
colnames(tbl) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video",)
colnames(tbl) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
View(tbl)
rownames(tbl) <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
print(tbl)
df.s <- as.data.frame(tbl)
# Set the row names
rownames(df.s) <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
# Set the column names
colnames(df.s) <- c("Baseline", "Profile", "Video", "Profile and Video")
print(df.s)
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
print(df.s)
tbl[1,]<- <- c(
tbl[1,]<- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
tbl<-df.s[-1,]
View(tbl)
tbl<-rbind(tbl_wide, s5)
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
# Change the row names
df.s <- as.data.frame(tbl)
# Set the row names
rownames(df.s) <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
# Set the column names
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
print(df.s)
View(df.s)
values <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
# Set the column names
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
df.s[[1]]<-values
View(df.s)
xt<-xtable(df.s)
library(xtable)
xt<-xtable(df.s)
print(xt, type="latex", file=(paste0(path_github,"online/Outputs/balance_numbers.tex"), floating=FALSE, include.rownames=FALSE)
xt<-xtable(df.s)
print(xt, type="latex", file=paste0(path_github,"online/Outputs/balance_numbers.tex"), floating=FALSE, include.rownames=FALSE)
xt<-xtable(df.s)
print(xt, type="latex", file=paste0(path_github,"/Outputs/balance_numbers.tex"), floating=FALSE, include.rownames=FALSE)
df.pv<-df[df$Pension_Type=="Private",]
names<-c("Variable", "Treatment", "N")
tbl1<-ddply(df.pv, .(Gender, Treatments) , summarise,
#n.treat = length(unique(treat)),
subj.n = length(unique(uid))
)
df.pv<-df.pv[df.pv$Pension_Type=="Private",]
# Ensure financial_lit_b is a factor
df.pv$financial_lit_b <- as.factor(df.pv$financial_lit_b)
names<-c( "Variable",  "Treatment", "N")
# Summarize the data
s1 <- df.pv %>%
group_by( Gender, Treatments) %>%
summarise(
Gender_count = length(unique(uemail)),
)
names(s1)<-names
print(s1)
s2 <- df.pv %>%
group_by( financial_lit_b, Treatments) %>%
summarise(
Fin_lit = length(unique(uemail)),
)
names(s2)<-names
s2<-s2[-c(13:16),]
print(s2)
s3 <- df.pv %>%
group_by( educ_eng, Treatments) %>%
summarise(
Educ = length(unique(uemail)),
)
names(s3)<-names
s4 <- df.pv %>%
group_by( private_health, Treatments) %>%
summarise(
health = length(unique(uemail)),
)
names(s4)<-names
tbl<-rbind(s1, s2, s3, s4)
tbl_wide <- tbl %>%
pivot_wider(names_from = Treatment, values_from = N)
tbl_wide$Total<-rowSums(tbl_wide[2:5])
s5 <- df.pv %>%
group_by(Treatments) %>%
summarise(
Age_mean = round(mean(Age, na.rm = TRUE),2),
Age_sd = round(sd(Age, na.rm = TRUE),2),
)%>%
pivot_longer(cols = c(Age_mean, Age_sd), names_to = "Variable", values_to = "Value") %>%
pivot_wider(names_from = Treatments, values_from = Value)
print(s4)
tbl<-rbind(tbl_wide, s5)
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
# Change the row names
df.s <- as.data.frame(tbl)
# Set the row names
values <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
df.s[[1]]<-values
# Set the column names
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
xt<-xtable(df.s)
print(xt, type="latex", file=paste0(path_github,"/Outputs/balance_numbers_private.tex"), floating=FALSE, include.rownames=FALSE)
rm(tbl_wide, s1, s2, s3, s4, s5, tbl2, df.s)
View(xt)
df.pp<-df.pp[df$Pension_Type=="Public",]
df.pp<-df[df$Pension_Type=="Public",]
# Ensure financial_lit_b is a factor
df.pp$financial_lit_b <- as.factor(df.pp$financial_lit_b)
names<-c( "Variable",  "Treatment", "N")
# Summarize the data
s1 <- df.pp %>%
group_by( Gender, Treatments) %>%
summarise(
Gender_count = length(unique(uemail)),
)
names(s1)<-names
print(s1)
s2 <- df.pp %>%
group_by( financial_lit_b, Treatments) %>%
summarise(
Fin_lit = length(unique(uemail)),
)
names(s2)<-names
s2<-s2[-c(13:16),]
print(s2)
s3 <- df.pp %>%
group_by( educ_eng, Treatments) %>%
summarise(
Educ = length(unique(uemail)),
)
names(s3)<-names
s4 <- df.pp %>%
group_by( private_health, Treatments) %>%
summarise(
health = length(unique(uemail)),
)
names(s4)<-names
tbl<-rbind(s1, s2, s3, s4)
tbl_wide <- tbl %>%
pivot_wider(names_from = Treatment, values_from = N)
tbl_wide$Total<-rowSums(tbl_wide[2:5])
s5 <- df.pp %>%
group_by(Treatments) %>%
summarise(
Age_mean = round(mean(Age, na.rm = TRUE),2),
Age_sd = round(sd(Age, na.rm = TRUE),2),
)%>%
pivot_longer(cols = c(Age_mean, Age_sd), names_to = "Variable", values_to = "Value") %>%
pivot_wider(names_from = Treatments, values_from = Value)
print(s4)
tbl<-rbind(tbl_wide, s5)
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
# Change the row names
df.s <- as.data.frame(tbl)
# Set the row names
values <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
df.s[[1]]<-values
# Set the column names
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
xt<-xtable(df.s)
print(xt, type="latex", file=paste0(path_github,"/Outputs/balance_numbers_public.tex"), floating=FALSE, include.rownames=FALSE)
rm(tbl_wide, s1, s2, s3, s4, s5, tbl2, df.s, df.pp)
rm(tbl_wide, s1, s2, s3, s4, s5, df.s, df.pp)
View(xt)
### Balance summary statistics full sample
# Ensure financial_lit_b is a factor
df$financial_lit_b <- as.factor(df$financial_lit_b)
names<-c( "Variable",  "Treatment", "N")
# Summarize the data
s1 <- df %>%
group_by( Gender, Treatments) %>%
summarise(
Gender_count = length(unique(uemail)),
)
names(s1)<-names
print(s1)
s2 <- df %>%
group_by( financial_lit_b, Treatments) %>%
summarise(
Fin_lit = length(unique(uemail)),
)
names(s2)<-names
s2<-s2[-c(13:16),]
print(s2)
s3 <- df %>%
group_by( educ_eng, Treatments) %>%
summarise(
Educ = length(unique(uemail)),
)
names(s3)<-names
s4 <- df %>%
group_by( private_health, Treatments) %>%
summarise(
health = length(unique(uemail)),
)
names(s4)<-names
tbl<-rbind(s1, s2, s3, s4)
tbl_wide <- tbl %>%
pivot_wider(names_from = Treatment, values_from = N)
tbl_wide$Total<-rowSums(tbl_wide[2:5])
s5 <- df %>%
group_by(Treatments) %>%
summarise(
Age_mean = round(mean(Age, na.rm = TRUE),2),
Age_sd = round(sd(Age, na.rm = TRUE),2),
)%>%
pivot_longer(cols = c(Age_mean, Age_sd), names_to = "Variable", values_to = "Value") %>%
pivot_wider(names_from = Treatments, values_from = Value)
print(s4)
tbl<-rbind(tbl_wide, s5)
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
# Change the row names
df.s <- as.data.frame(tbl)
# Set the row names
values <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
df.s[[1]]<-values
# Set the column names
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
xt<-xtable(df.s)
print(xt, type="latex", file=paste0(path_github,"/Outputs/balance_numbers_online.tex"), floating=FALSE, include.rownames=FALSE)
rm(tbl_wide, s1, s2, s3, s4, s5, tbl2, df.s)
### Balance summary statistics private
df.pv<-df[df$Pension_Type=="Private",]
# Ensure financial_lit_b is a factor
df.pv$financial_lit_b <- as.factor(df.pv$financial_lit_b)
names<-c( "Variable",  "Treatment", "N")
# Summarize the data
s1 <- df.pv %>%
group_by( Gender, Treatments) %>%
summarise(
Gender_count = length(unique(uemail)),
)
names(s1)<-names
print(s1)
s2 <- df.pv %>%
group_by( financial_lit_b, Treatments) %>%
summarise(
Fin_lit = length(unique(uemail)),
)
names(s2)<-names
s2<-s2[-c(13:16),]
print(s2)
s3 <- df.pv %>%
group_by( educ_eng, Treatments) %>%
summarise(
Educ = length(unique(uemail)),
)
names(s3)<-names
s4 <- df.pv %>%
group_by( private_health, Treatments) %>%
summarise(
health = length(unique(uemail)),
)
names(s4)<-names
tbl<-rbind(s1, s2, s3, s4)
tbl_wide <- tbl %>%
pivot_wider(names_from = Treatment, values_from = N)
tbl_wide$Total<-rowSums(tbl_wide[2:5])
s5 <- df.pv %>%
group_by(Treatments) %>%
summarise(
Age_mean = round(mean(Age, na.rm = TRUE),2),
Age_sd = round(sd(Age, na.rm = TRUE),2),
)%>%
pivot_longer(cols = c(Age_mean, Age_sd), names_to = "Variable", values_to = "Value") %>%
pivot_wider(names_from = Treatments, values_from = Value)
print(s4)
tbl<-rbind(tbl_wide, s5)
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
# Change the row names
df.s <- as.data.frame(tbl)
# Set the row names
values <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
df.s[[1]]<-values
# Set the column names
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
xt<-xtable(df.s)
print(xt, type="latex", file=paste0(path_github,"/Outputs/balance_numbers_online_private.tex"), floating=FALSE, include.rownames=FALSE)
rm(tbl_wide, s1, s2, s3, s4, s5, tbl2, df.s, df.pv)
### Balance summary statistics Public
df.pp<-df[df$Pension_Type=="Public",]
# Ensure financial_lit_b is a factor
df.pp$financial_lit_b <- as.factor(df.pp$financial_lit_b)
names<-c( "Variable",  "Treatment", "N")
# Summarize the data
s1 <- df.pp %>%
group_by( Gender, Treatments) %>%
summarise(
Gender_count = length(unique(uemail)),
)
names(s1)<-names
print(s1)
s2 <- df.pp %>%
group_by( financial_lit_b, Treatments) %>%
summarise(
Fin_lit = length(unique(uemail)),
)
names(s2)<-names
s2<-s2[-c(13:16),]
print(s2)
s3 <- df.pp %>%
group_by( educ_eng, Treatments) %>%
summarise(
Educ = length(unique(uemail)),
)
names(s3)<-names
s4 <- df.pp %>%
group_by( private_health, Treatments) %>%
summarise(
health = length(unique(uemail)),
)
names(s4)<-names
tbl<-rbind(s1, s2, s3, s4)
tbl_wide <- tbl %>%
pivot_wider(names_from = Treatment, values_from = N)
tbl_wide$Total<-rowSums(tbl_wide[2:5])
s5 <- df.pp %>%
group_by(Treatments) %>%
summarise(
Age_mean = round(mean(Age, na.rm = TRUE),2),
Age_sd = round(sd(Age, na.rm = TRUE),2),
)%>%
pivot_longer(cols = c(Age_mean, Age_sd), names_to = "Variable", values_to = "Value") %>%
pivot_wider(names_from = Treatments, values_from = Value)
print(s4)
tbl<-rbind(tbl_wide, s5)
tbl$PC_Baseline<-round(tbl$Baseline/tbl$Total, 4)*100
tbl$PC_T.1<-round(tbl$Perfil/tbl$Total, 4)*100
tbl$PC_T.2<-round(tbl$Video/tbl$Total, 4)*100
tbl$PC_T.3<-round(tbl$VideoPerfil/tbl$Total, 4)*100
# Change the row names
df.s <- as.data.frame(tbl)
# Set the row names
values <- c(
"Female", "Male", "Low Fin. Lit.", "Mid Fin. Lit.", "High Fin. Lit.",
"Post-graduate degree", "Primary or high-school degree", "University degree",
"Public Health or other", "Private healthcare", "Age (mean)", "Age (sd)"
)
df.s[[1]]<-values
# Set the column names
colnames(df.s) <- c("Variable","Baseline", "Profile", "Video", "Profile and Video", "Total",
"% Baseline", "% Profile", "% Video", "% Profile and Video")
xt<-xtable(df.s)
print(xt, type="latex", file=paste0(path_github,"/Outputs/balance_numbers_online_public.tex"), floating=FALSE, include.rownames=FALSE)
rm(tbl_wide, s1, s2, s3, s4, s5, df.s, df.pp)
nps_question<-as.numeric(df.f$Recomendar)
nps_group<-df.f$Treatments
nps_date<-as.Date("2023-07-06")
#Mean and variance
d <- data.frame(nps_question, nps_date, nps_group)
d<-d[!is.na(d$nps_question),]
tbl1<-d %>%
group_by(nps_group) %>%
summarise(mean_nps = mean(nps_question, na.rm=T),
sd_nps= sd(nps_question, na.rm=T))
tbl<-nps_calc(d, nps_group)
library(marketr)
library(xtable)
library(dplyr)
nps_question<-as.numeric(df.f$Recomendar)
nps_group<-df.f$Treatments
nps_date<-as.Date("2023-07-06")
#Mean and variance
d <- data.frame(nps_question, nps_date, nps_group)
d<-d[!is.na(d$nps_question),]
tbl1<-d %>%
group_by(nps_group) %>%
summarise(mean_nps = mean(nps_question, na.rm=T),
sd_nps= sd(nps_question, na.rm=T))
tbl<-nps_calc(d, nps_group)
tbl2<-left_join(tbl1, tbl, by = "nps_group")
colnames(tbl2) <- c("Treatment", "Mean_Promoter", "s.d._Promoter", "Net_Promoter_Score", "Number_of_responses")
xt<-xtable(tbl2)
View(xt)
View(tbl)
lm_nps<- lm(nps_question ~ Profile + Video + Profile_Video,
data = df)
summary(nps_question)
lm_nps<- lm(nps_question ~ Profile + Video + Profile_Video, data = df)
